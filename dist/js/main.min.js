"use strict";var firstName=document.querySelector("#first-name"),lastName=document.querySelector("#last-name"),pesel=document.querySelector("#pesel"),street=document.querySelector("#street"),flatNumber=document.querySelector("#flat-number"),city=document.querySelector("#city"),zipCode=document.querySelector("#zip"),phoneNumber=document.querySelector("#phone-number"),mail=document.querySelector("#mail"),profilPhoto=document.querySelector("#profil-photo"),voivodeship=document.querySelector("#voivodeship"),regulations=document.querySelector("#regulations"),Inputs=[firstName,lastName,pesel,street,flatNumber,city,zipCode,phoneNumber,mail],sendBtn=document.querySelector(".send"),clearBtn=document.querySelector(".clear"),closeModalBtn=document.querySelector(".close"),modal=document.querySelector(".modal-shadow");function clearAllInputs(e){e.preventDefault(),profilPhoto.value="",[firstName,lastName,pesel,street,flatNumber,city,zipCode,phoneNumber,mail,profilPhoto,voivodeship,regulations].forEach(function(e){e.value="",clearError(e)}),0!==voivodeship&&(voivodeship.value=0),modal.style.display="none",regulations.checked=!1}function checkInputsValue(e){e.forEach(function(e){""===e.value?showError(e,e.placeholder):clearError(e)})}function showError(e,r){var e=e.parentElement,t=e.querySelector(".error-text");e.classList.add("error"),t.textContent=r}function clearError(e){e.parentElement.classList.remove("error")}function checkPhotoInput(e){var r=e.parentElement,t=r.querySelector(".error-text");""===e.value?(r.classList.add("error"),t.textContent="Wybierz zdjęcie"):r.classList.remove("error")}function checkVoivodeshipInput(e){var r=e.parentElement,t=r.querySelector(".error-text");"0"===e.value?(r.classList.add("error"),t.textContent="Wybierz województwo"):r.classList.remove("error")}function checkRegulations(e){e.parentElement.querySelector(".error-text");e.checked?clearError(e):showError(e,e.placeholder)}function checkLength(e,r){e.value.length<r?showError(e,"".concat(e.previousElementSibling.textContent," musi składać się z ").concat(r," cyfr")):e.value.length>r&&showError(e,"".concat(e.previousElementSibling.textContent," jest za długi"))}function validZipCode(e){e.value.match(/^\d\d-\d\d\d$/)?clearError(e):showError(e,"".concat(e.previousElementSibling.textContent," powinieć wyglądać tak: NN-NNN"))}function validMail(e){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/.test(e.value)?clearError(e):showError(e,"E-mail jest niepoprawny")}function validLetters(e){var r=/^[A-Za-z]+$/;e.forEach(function(e){e.value.match(r)?clearError(e):""===e.value?showError(e,e.placeholder):showError(e,"".concat(e.previousElementSibling.textContent," nie może zawierać cyfr"))})}function validNumbers(e){e.value.match(/^\d+$/)?clearError(e):""===e.value?showError(e,e.placeholder):showError(e,"".concat(e.previousElementSibling.textContent," nie może zawierać liter"))}function checkErrors(){var e=document.querySelectorAll(".form-box"),r=0;e.forEach(function(e){e.classList.contains("error")&&r++}),0===r&&showModal(),console.log(r)}function showModal(){modal.style.display="block",modal.classList.add("modal-animation"),setTimeout(function(){modal.classList.remove("modal-animation")},400)}clearBtn.addEventListener("click",clearAllInputs),sendBtn.addEventListener("click",function(e){e.preventDefault(),checkInputsValue(Inputs),checkPhotoInput(profilPhoto),checkVoivodeshipInput(voivodeship),checkRegulations(regulations),checkLength(pesel,11),checkLength(phoneNumber,9),validZipCode(zipCode),validMail(mail),validLetters([firstName,lastName,city]),validNumbers(flatNumber),checkErrors()}),closeModalBtn.addEventListener("click",clearAllInputs),window.addEventListener("click",function(e){return e.target===modal&&(modal.style.display="none")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZmlyc3ROYW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibGFzdE5hbWUiLCJwZXNlbCIsInN0cmVldCIsImZsYXROdW1iZXIiLCJjaXR5IiwiemlwQ29kZSIsInBob25lTnVtYmVyIiwibWFpbCIsInByb2ZpbFBob3RvIiwicmVndWxhdGlvbnMiLCJjbGVhckVycm9yIiwiaW5wdXQiLCJjbGVhckJ0biIsImNsb3NlTW9kYWxCdG4iLCJ2b2l2b2Rlc2hpcCIsImNsZWFyQWxsSW5wdXRzIiwiZSIsIm1vZGFsIiwidmFsdWUiLCJmb3JtQm94IiwiZm9yRWFjaCIsImVycm9yVGV4dCIsImNsYXNzTGlzdCIsInRleHRDb250ZW50IiwicGFyZW50RWxlbWVudCIsInN0eWxlIiwiZGlzcGxheSIsImNoZWNrUGhvdG9JbnB1dCIsImNoZWNrSW5wdXRzVmFsdWUiLCJzaG93RXJyb3IiLCJlbCIsImFkZCIsIm1zZyIsInJlbW92ZSIsImNoZWNrZWQiLCJjaGVja1ZvaXZvZGVzaGlwSW5wdXQiLCJ2YWxpZFppcENvZGUiLCJjaGVja1JlZ3VsYXRpb25zIiwidmFsaWRNYWlsIiwicmUiLCJ0ZXN0IiwicGxhY2Vob2xkZXIiLCJ2YWxpZExldHRlcnMiLCJtaW5MZW5ndGgiLCJsZXR0ZXJzIiwibGVuZ3RoIiwiaW5wdXRzIiwiY29uY2F0IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsIm51bWJlcnMiLCJtYXRjaCIsImNoZWNrRXJyb3JzIiwiZXJyb3JDb3VudGVyIiwiY29uc29sZSIsInNob3dNb2RhbCIsInNldFRpbWVvdXQiLCJJbnB1dHMiLCJjaGVja0xlbmd0aCIsInZhbGlkTnVtYmVycyIsImFsbElucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb250YWlucyIsImxvZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZW5kQnRuIiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3ciLCJ0YXJnZXQiXSwibWFwcGluZ3MiOiJhQUFB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WUFDVmdELGdCQUdKdEMsY0FBY2tELGlCQUFpQixRQUFTaEQsZ0JBQ3hDbUQsT0FBT0gsaUJBQWlCLFFBQVMsU0FBQS9DLEdBQUMsT0FBSUEsRUFBRW1ELFNBQVdsRCxRQUFTQSxNQUFNUSxNQUFNQyxRQUFVIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZmlyc3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0LW5hbWUnKTtcbmNvbnN0IGxhc3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xhc3QtbmFtZScpO1xuY29uc3QgcGVzZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGVzZWwnKTtcbmNvbnN0IHN0cmVldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdHJlZXQnKTtcbmNvbnN0IGZsYXROdW1iZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmxhdC1udW1iZXInKTtcbmNvbnN0IGNpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xuY29uc3QgemlwQ29kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN6aXAnKTtcbmNvbnN0IHBob25lTnVtYmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Bob25lLW51bWJlcicpO1xuY29uc3QgbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYWlsJyk7XG5jb25zdCBwcm9maWxQaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWwtcGhvdG8nKTtcbmNvbnN0IHZvaXZvZGVzaGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ZvaXZvZGVzaGlwJyk7XG5jb25zdCByZWd1bGF0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZWd1bGF0aW9ucycpO1xuXG5jb25zdCBJbnB1dHMgPSBbXG5cdGZpcnN0TmFtZSxcblx0bGFzdE5hbWUsXG5cdHBlc2VsLFxuXHRzdHJlZXQsXG5cdGZsYXROdW1iZXIsXG5cdGNpdHksXG5cdHppcENvZGUsXG5cdHBob25lTnVtYmVyLFxuXHRtYWlsLFxuXTtcblxuY29uc3Qgc2VuZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kJyk7XG5jb25zdCBjbGVhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbGVhcicpO1xuY29uc3QgY2xvc2VNb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpO1xuXG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1zaGFkb3cnKTtcblxuZnVuY3Rpb24gY2xlYXJBbGxJbnB1dHMoZSkge1xuXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0cHJvZmlsUGhvdG8udmFsdWUgPSAnJztcblx0W1xuXHRcdGZpcnN0TmFtZSxcblx0XHRsYXN0TmFtZSxcblx0XHRwZXNlbCxcblx0XHRzdHJlZXQsXG5cdFx0ZmxhdE51bWJlcixcblx0XHRjaXR5LFxuXHRcdHppcENvZGUsXG5cdFx0cGhvbmVOdW1iZXIsXG5cdFx0bWFpbCxcblx0XHRwcm9maWxQaG90byxcblx0XHR2b2l2b2Rlc2hpcCxcbiAgICAgICAgcmVndWxhdGlvbnNcblx0XS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuXHRcdGlucHV0LnZhbHVlID0gJyc7XG5cdFx0Y2xlYXJFcnJvcihpbnB1dCk7XG5cdH0pO1xuXG5cdGlmICh2b2l2b2Rlc2hpcCAhPT0gMCkge1xuXHRcdHZvaXZvZGVzaGlwLnZhbHVlID0gMDtcblx0fVxuXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICByZWd1bGF0aW9ucy5jaGVja2VkID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGNoZWNrSW5wdXRzVmFsdWUoaW5wdXQpIHtcblx0aW5wdXQuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRpZiAoZWwudmFsdWUgPT09ICcnKSB7XG5cdFx0XHRzaG93RXJyb3IoZWwsIGVsLnBsYWNlaG9sZGVyKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2xlYXJFcnJvcihlbCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gc2hvd0Vycm9yKGlucHV0LCBtc2cpIHtcblx0Y29uc3QgZm9ybUJveCA9IGlucHV0LnBhcmVudEVsZW1lbnQ7XG5cdGNvbnN0IGVycm9yVGV4dCA9IGZvcm1Cb3gucXVlcnlTZWxlY3RvcignLmVycm9yLXRleHQnKTtcblxuXHRmb3JtQm94LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG5cdGVycm9yVGV4dC50ZXh0Q29udGVudCA9IG1zZztcbn1cblxuZnVuY3Rpb24gY2xlYXJFcnJvcihpbnB1dCkge1xuXHRjb25zdCBmb3JtQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcblx0Zm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xufVxuXG5mdW5jdGlvbiBjaGVja1Bob3RvSW5wdXQoaW5wdXQpIHtcblx0Y29uc3QgZm9ybUJveCA9IGlucHV0LnBhcmVudEVsZW1lbnQ7XG5cdGNvbnN0IGVycm9yVGV4dCA9IGZvcm1Cb3gucXVlcnlTZWxlY3RvcignLmVycm9yLXRleHQnKTtcblxuXHRpZiAoaW5wdXQudmFsdWUgPT09ICcnKSB7XG5cdFx0Zm9ybUJveC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xuXHRcdGVycm9yVGV4dC50ZXh0Q29udGVudCA9IGBXeWJpZXJ6IHpkasSZY2llYDtcblx0fSBlbHNlIHtcblx0XHRmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2hlY2tWb2l2b2Rlc2hpcElucHV0KGlucHV0KSB7XG5cdGNvbnN0IGZvcm1Cb3ggPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xuXHRjb25zdCBlcnJvclRleHQgPSBmb3JtQm94LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci10ZXh0Jyk7XG5cblx0aWYgKGlucHV0LnZhbHVlID09PSAnMCcpIHtcblx0XHRmb3JtQm94LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG5cdFx0ZXJyb3JUZXh0LnRleHRDb250ZW50ID0gYFd5Ymllcnogd29qZXfDs2R6dHdvYDtcblx0fSBlbHNlIHtcblx0XHRmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2hlY2tSZWd1bGF0aW9ucyhpbnB1dCkge1xuXHRjb25zdCBmb3JtQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcblx0Y29uc3QgZXJyb3JUZXh0ID0gZm9ybUJveC5xdWVyeVNlbGVjdG9yKCcuZXJyb3ItdGV4dCcpO1xuXG5cdGlmICghaW5wdXQuY2hlY2tlZCkge1xuICAgICAgICBzaG93RXJyb3IoaW5wdXQsIGlucHV0LnBsYWNlaG9sZGVyKVxuXHR9IGVsc2Uge1xuICAgICAgICBjbGVhckVycm9yKGlucHV0KVxuXHR9XG59XG5cbmZ1bmN0aW9uIGNoZWNrTGVuZ3RoKGlucHV0LCBtaW5MZW5ndGgpIHtcblx0aWYgKGlucHV0LnZhbHVlLmxlbmd0aCA8IG1pbkxlbmd0aCkge1xuXHRcdHNob3dFcnJvcihcblx0XHRcdGlucHV0LFxuXHRcdFx0YCR7aW5wdXQucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudH0gbXVzaSBza8WCYWRhxIcgc2nEmSB6ICR7bWluTGVuZ3RofSBjeWZyYFxuXHRcdCk7XG5cdH0gZWxzZSBpZiAoaW5wdXQudmFsdWUubGVuZ3RoID4gbWluTGVuZ3RoKSB7XG5cdFx0c2hvd0Vycm9yKFxuXHRcdFx0aW5wdXQsXG5cdFx0XHRgJHtpbnB1dC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50fSBqZXN0IHphIGTFgnVnaWBcblx0XHQpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHZhbGlkWmlwQ29kZShpbnB1dCkge1xuXHRpZiAoIWlucHV0LnZhbHVlLm1hdGNoKC9eXFxkXFxkLVxcZFxcZFxcZCQvKSkge1xuXHRcdHNob3dFcnJvcihcblx0XHRcdGlucHV0LFxuXHRcdFx0YCR7aW5wdXQucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudH0gcG93aW5pZcSHIHd5Z2zEhWRhxIcgdGFrOiBOTi1OTk5gXG5cdFx0KTtcblx0fSBlbHNlIHtcblx0XHRjbGVhckVycm9yKGlucHV0KTtcblx0fVxufVxuXG5mdW5jdGlvbiB2YWxpZE1haWwobWFpbCkge1xuXHRjb25zdCByZSA9XG5cdFx0L14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17MiwzfSkpJC87XG5cblx0aWYgKHJlLnRlc3QobWFpbC52YWx1ZSkpIHtcblx0XHRjbGVhckVycm9yKG1haWwpO1xuXHR9IGVsc2Uge1xuXHRcdHNob3dFcnJvcihtYWlsLCAnRS1tYWlsIGplc3QgbmllcG9wcmF3bnknKTtcblx0fVxufVxuXG5mdW5jdGlvbiB2YWxpZExldHRlcnMoaW5wdXRzKSB7XG5cdGNvbnN0IGxldHRlcnMgPSAvXltBLVphLXpdKyQvO1xuXHRpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcblx0XHRpZiAoaW5wdXQudmFsdWUubWF0Y2gobGV0dGVycykpIHtcblx0XHRcdGNsZWFyRXJyb3IoaW5wdXQpO1xuXHRcdH0gZWxzZSBpZiAoaW5wdXQudmFsdWUgPT09ICcnKSB7XG5cdFx0XHRzaG93RXJyb3IoaW5wdXQsIGlucHV0LnBsYWNlaG9sZGVyKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2hvd0Vycm9yKFxuXHRcdFx0XHRpbnB1dCxcblx0XHRcdFx0YCR7aW5wdXQucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudH0gbmllIG1vxbxlIHphd2llcmHEhyBjeWZyYFxuXHRcdFx0KTtcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB2YWxpZE51bWJlcnMoaW5wdXQpIHtcblx0Y29uc3QgbnVtYmVycyA9IC9eXFxkKyQvO1xuXG5cdGlmIChpbnB1dC52YWx1ZS5tYXRjaChudW1iZXJzKSkge1xuXHRcdGNsZWFyRXJyb3IoaW5wdXQpO1xuXHR9IGVsc2UgaWYgKGlucHV0LnZhbHVlID09PSAnJykge1xuXHRcdHNob3dFcnJvcihpbnB1dCwgaW5wdXQucGxhY2Vob2xkZXIpO1xuXHR9IGVsc2Uge1xuXHRcdHNob3dFcnJvcihcblx0XHRcdGlucHV0LFxuXHRcdFx0YCR7aW5wdXQucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudH0gbmllIG1vxbxlIHphd2llcmHEhyBsaXRlcmBcblx0XHQpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNoZWNrRXJyb3JzICgpIHtcbiAgICBjb25zdCBhbGxJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1ib3gnKTtcbiAgICBsZXQgZXJyb3JDb3VudGVyID0gMDtcblxuICAgIGFsbElucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgaWYoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlcnJvcicpKXtcbiAgICAgICAgICAgIGVycm9yQ291bnRlcisrXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYoZXJyb3JDb3VudGVyID09PSAwKSB7XG4gICAgICAgIHNob3dNb2RhbCgpXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGVycm9yQ291bnRlcik7XG59XG5cbmZ1bmN0aW9uIHNob3dNb2RhbCgpIHtcbiAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtYW5pbWF0aW9uJylcbiAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLWFuaW1hdGlvbicpO1xufSwgNDAwKTtcbn1cblxuY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGVhckFsbElucHV0cyk7XG5cbnNlbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdGNoZWNrSW5wdXRzVmFsdWUoSW5wdXRzKTtcblx0Y2hlY2tQaG90b0lucHV0KHByb2ZpbFBob3RvKTtcblx0Y2hlY2tWb2l2b2Rlc2hpcElucHV0KHZvaXZvZGVzaGlwKTtcblx0Y2hlY2tSZWd1bGF0aW9ucyhyZWd1bGF0aW9ucyk7XG5cdGNoZWNrTGVuZ3RoKHBlc2VsLCAxMSk7IFxuXHRjaGVja0xlbmd0aChwaG9uZU51bWJlciwgOSk7XG5cdHZhbGlkWmlwQ29kZSh6aXBDb2RlKTtcblx0dmFsaWRNYWlsKG1haWwpO1xuXHR2YWxpZExldHRlcnMoW2ZpcnN0TmFtZSwgbGFzdE5hbWUsIGNpdHldKTtcblx0dmFsaWROdW1iZXJzKGZsYXROdW1iZXIpO1xuICAgIGNoZWNrRXJyb3JzKCk7XG59KTtcblxuY2xvc2VNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsZWFyQWxsSW5wdXRzKVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBlLnRhcmdldCA9PT0gbW9kYWwgPyAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJyA6IGZhbHNlKSJdfQ==
